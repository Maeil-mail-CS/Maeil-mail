<details>
<summary> 
로그와 메트릭을 설명해주세요.
</summary>

🔗 질문 링크: [로그와 메트릭을 설명해주세요.](https://www.maeil-mail.kr/question/66)

✅ 답변 내용:
<pre>
  로그는 서버 상의 crud와 같이 요청과 응답의 흐름을 기록하는 것을 로그라고 하고요
  메트릭은 전체적인 성능과 같은 지표를 기록하는 데 있어 두 가지 차이가 있습니다.
  그래서 로그 같은 경우는 서버 상에서 일어날 수 있는 에러, 요청 흐름, 어떤 데이터인지에 대한
  흐름과 같은 '로그를 남긴다' 라고 하고요
  메트릭은 TPS나 그런 성능, 자원 등의 요청들을 .. 요청들에 대한 자원을 ..?
  회사 측은 메트릭을 같은 정보를 수집해 더 나은 서비스로 나아갈 수 있는 기반이 되도록 하는 것으로 알고 있습니다.
</pre>

💡 꼬리 질문1: 로그와 메트릭을 수집해 보신 적이 있나요? 🤔
<pre>
  쇼핑몰 서비스에서 로고를 수집해본 경험이 있습니다.
  클릭 이벤트, 상품 페이지 이동 등의 개인화된 서비스를 제공하려고 그런 데이터에 대한
  로그 서버에서 DB로 로그를 수집해본 적이 있고요
  메트릭 같은 경우에는 이게 맞는지 잘 맞는지 모르겠지만 Grafana + Influx DB와 같이
  스프링과 연결을 해 실시간으로 모니터링한 경험이 있습니다.
</pre>

💡 꼬리 질문2: 언급해주신 메트릭을 수집하신 이유가 있으신가요? 🤓
<pre>
  수집보다는 모니터링에 가까운 것 같습니다.
  제가 앞서 한 답변은 메트릭과 거리가 먼 것 같습니다.
</pre>

💡 꼬리 질문3: `System.out.println`을 사용하면 로깅 프레임워크는 사용하지 않아도 되지 않나요?
<pre>
  우선적으로 println은 터미널에 값만 찍는 형태이기 때문에 추적이 불가능하고요,
  추적을 하려면 더 길게 쓰긴해야되겠지만 그런 용도로 사용하기엔 부적절합니다.
  어느 클래스에서 벌어졌는지도 보이기도 쉽지 않고, 이게 과연 정보성인지 에러인지
  시각적으로 좋지 않기 때문에 println보다는 로깅 프레임워크를 사용하는 것이 더 낫습니다.
</pre>

📝 피드백 내용:
<pre>
  1. 영어 발음 굴리지 마세요 
  2. ~했고요, ~하고요 어미 사용하지 않는게 좋을 것 같습니다.
  이 어미를 덜어내려면 답변을 구조적으로 하는 연습이 필요할 것 같아요.
</pre>

# ✨ 질문에 대한 보충 학습 내용:



# 1. 로깅을 꼮 남겨야 하는 것인가?

1. 로깅의 목적
- 운영 장애 대응
- 사용자 행위 대응
- 보안
- 성능 분석

위 와 같은 목적으로 필요한 지점을 전략적으로 찍어야 한다.

2. 로깅이 꼭 필요한 부분?
- 에러 예외 (Error, Warn)
- 중요 비즈니스 이벤트 (INFO)
- 보안 관련 (Info/ error 레벨)
- 성능 모니터링(Debug/trace 선택적)

3. 로깅을 줄여야 하는 부분
- 모든 서비스의 시작, 끝
- 대량 데이터
- 단순 성공 흐름 - 장애 파악에 도움이 안되는 것..

4. 추천 방식
- 에러는 반드시 스택 트레이스 포함
- 공통 로깅 처리
- 서비스 단 로깅은 이벤트 중심으로만

5. 결론
- 에러/이벤트/보안 중심으로 성능,개인정보, 운영 효율성을 고려해 선별적으로 남긴다.

# 2. 로그백은 뭐야?
SLF4J의 기본 구현체 -> 스프링 부트가 기본적으로 Logback을 사용

logback-spring.xml → 복잡하고 세밀한 제어

분산 환경일때 추적을 할 수 있게 로그를 모아서 보이게 해준다>?

log4j를 토대로 만들었다.

## 구성요소

1. Logger
어떻게 기록할까? info, debug 등

2. Appender
어디에다 기록할까?

콘솔, 파일, 롤링 파일 저장
- consoleAppender
- FileAppender
- RollingFileAppender


3. Layout -> encoder
어떻게 출력할까?

사용자가 지정한 형식으로 표현될 로그메시지를 변환하는 역할

logback.xml 의 위에 3가지를 설정하여 
운영환경과 개발 환경에서 출력을 어떻게 지정하고 저장할 것인지 상세히 분리할 수 잇다.

더 나아가서 kafka를 사용해 분산된 로그를 한곳에 모아 볼 수 있다.

# 3. 로깅이란

기본 debug 아래 단계인 trace는 찍히지 않는다.
출력레벨

- trace < debug < info < warn < error 
bridge -> slf4j api -> binding -> logback(logback-core)

logback.xml으로 상세하게 설정이 가능하다.

# 4. 엑추에이터란

스프링 부트 애플리케이션에 운영, 모니터링 기능을 자동으로 붙여주는 모듈

즉, 앱 내부 상태를 API 형태로 꺼내 보여주는 도구이다.

## 대표 기능 
- health : db 연결, redis 연결, disk 용량
- metrics : jvm 메모리 사용량, gc 횟수, http 요청 수, 응답 시간
- loggers : 런타임에서 로깅 레벨 변경 가능
- env : 환경 변수 확인

Micrometer와 함께 쓰면 Prometheus, grafana 같은 툴로 모니터링 가능

# 5. 메트릭이 뭐야
어떤 시스템의 상태나 성능을 수치화한 값

## 목적
- 성능 최적화
- 운영 모니터링
- 알람 설정 : 심각할때 slack 메일
- 장기 분석

전체의 서버 지표를 볼 수 있다.

👀 참고 링크:
  
</details>
